{{ $products := index (index .Site.Data .Site.Language.Lang) (path.Dir .Params.data_file) }}

{{ if eq .Section "products"}}
{{ $sticky := index (index .Site.Data .Site.Language.Lang) (split .Params.data_file "/") }}
<div class="top-0 md:sticky bg-white">

    <div class="mt-4">
        {{ partial "advertiser-disclosure" . }}
    </div>

    <div
        class="w-full my-4 bg-gray-50 p-4 flex flex-wrap justify-center items-center border-gray-200 border rounded-t rounded-b">
        <div class="bg-white rounded-t rounded-b">
            <a target="_blank" data-ppc-offer="{{ $sticky.name }}" class="ppc-click inline-flex justify-center items-center" href="{{ $sticky.cpa_link }}">
                <img class="w-1/2 my-8" src="./img/products/{{ $sticky.logo }}" alt="">
            </a>
        </div>

        <span class="flex justify-center w-full mt-2">
            <a target="_blank" data-ppc-offer="{{ $sticky.name }}" href="{{ $sticky.cpa_link }}"
                class="ppc-click w-full h-16 shadow-sm inline-flex justify-center items-center px-6 py-3 border border-transparent text-base leading-6 font-bold rounded-md text-white bg-green-500 border-green-600 hover:bg-green-600 hover:border-green-700 focus:outline-none focus:border-green-700 focus:ring-green active:bg-green-700 transition">
                {{ $sticky.button_cta }}
                <svg class="w-6 h-6 ml-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                        d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z"
                        clip-rule="evenodd"></path>
                </svg>
            </a>
        </span>

        {{ if eq $sticky.has_secondary_offer true }}
        <span class="flex justify-center w-full mt-4">
            <a target="_blank" data-ppc-offer="{{ $sticky.secondary_offer_name }}" href="{{ $sticky.secondary_cpa_link }}"
                class="ppc-click w-full h-16 shadow-sm inline-flex justify-center items-center px-6 py-3 border border-transparent text-base leading-6 font-bold rounded-md text-white bg-green-500 border-green-600 hover:bg-green-600 hover:border-green-700 focus:outline-none focus:border-green-700 focus:ring-green active:bg-green-700 transition">
                {{ $sticky.secondary_button_cta }}
                <svg class="w-6 h-6 ml-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                        d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z"
                        clip-rule="evenodd"></path>
                </svg>
            </a>
        {{ end }}
    </div>
</div>
{{ end }}

{{ $productPages := where .Site.RegularPages "Section" "products"}}
{{ $compareLink := "./products/" }}
{{ if eq .Section "products"}}
{{ $productPages = .Parent.RegularPages }}
{{ $compareLink = .Parent.Permalink }}
{{ end }}

{{ with $productPages }}
<div
    class="text-gray-500 w-full my-4 bg-gray-50 p-4 flex flex-wrap justify-center items-center border-gray-200 border rounded-t rounded-b">
    <h4 class="tracking-tight font-bold text-lg text-gray-500 mb-4">
        <svg class="w-6 h-6 inline-flex text-yellow-600" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd"
                d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"
                clip-rule="evenodd"></path>
        </svg>
        {{ T "sidebar_title" }}
    </h4>

    {{ range first 5 $productPages }}
    {{ $product := index (index .Site.Data .Site.Language.Lang) (split .Params.data_file "/") }}
    <div class="w-full bg-white hover:bg-gray-100 border border-gray-200 my-1 rounded-md shadow-sm  active:bg-gray-50 transition">
        <a target="_blank" data-ppc-offer="{{ $product.name }}" href="{{ $product.cpa_link }}" class="ppc-click flex flex-nowrap p-2">
            <span class="w-2/3 font-normal text-md flex flex-nowrap items-center">
                <img class="h-16 object-fill inline-flex" src="./img/products/{{ $product.icon }}" alt="{{ .Title }}">
                <span class="ml-2">{{ $product.name }}</span>
            </span>
            <span class="w-1/3 flex justify-end items-center">
                <svg class="w-8 h-8 text-green-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z" clip-rule="evenodd"></path></svg>
            </span>
        </a>
    </div>
    {{ end }}

    <span class="inline-flex rounded-md shadow-sm mt-4">
        <a href="{{ $compareLink }}"
            class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm leading-5 font-medium rounded-md text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:border-green-300 focus:ring-green active:text-gray-800 active:bg-gray-50 transition">
            {{ T "sidebar_compare_btn" }}
        </a>
    </span>
</div>
{{ end }}

